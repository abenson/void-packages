# Template file for 'exploitdb'
pkgname=exploitdb
version=2024.11.26
revision=1
wrksrc="$pkgname-${version//./-}"
depends="libxml2"
short_desc="Archive of Exploits, Shellcode, and Security Papers"
maintainer="Andrew Benson <abenson+void@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://www.exploit-db.com/"
distfiles="https://gitlab.com/exploit-database/exploitdb/-/archive/${version//./-}/exploitdb-${version//./-}.tar.bz2"
checksum=db67de2d12f83299ee5c9eaf0a3b24a49317e160df54647f6a4197eed759a681
python_version="2"

# This package is mostly scripts; the following flags skip some length,
# unnecessary checks.
nostrip=yes
ignore_elf_dirs="/usr/share"

do_install() {
	vmkdir usr/share
	sed -i 's|/opt|/usr/share|g' .searchsploit_rc
	cp -r ${wrksrc} $DESTDIR/usr/share/exploitdb
	vmkdir usr/bin
	ln -sf /usr/share/exploitdb/searchsploit $DESTDIR/usr/bin/searchsploit
}
